{"version":3,"sources":["webpack:///./js/select.js","webpack:///./js/scrypt.js","webpack:///./templates/gallery.hbs"],"names":["Select","selector","options","this","$el","document","querySelector","selectedId","render","setup","placeholder","data","classList","add","innerHTML","text","items","map","item","cls","id","value","join","getTemplate","clickHandler","bind","addEventListener","$arrow","$value","event","type","target","dataset","toggle","select","close","textContent","current","querySelectorAll","forEach","el","remove","onSelect","isOpen","open","destroy","removeEventListener","contains","find","refs","btnSearch","btnLoadMore","gallery","query","form","ImageFinder","lenguage","key","page","baseURL","preventDefault","searchQuery","getData","nodeName","src","source","basicLightbox","show","Observer","IntersectionObserver","entries","observer","entry","isIntersecting","unobserve","rootMargin","threshold","url","fetch","response","json","hits","total","notice","layout","galleryTemplate","insertAdjacentHTML","observe","lastElementChild","error","Handlebars","module","exports","template","container","depth0","helpers","partials","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop"],"mappings":"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","file":"main.135cb1fde5cd3af735c8.js","sourcesContent":["const getTemplate = (data = [], placeholder, selectedId) => {\n  let text = placeholder ?? 'Placeholder по умолчанию';\n\n  const items = data.map(item => {\n    let cls = '';\n    if (item.id === selectedId) {\n      text = item.value;\n      cls = 'selected';\n    }\n    return `\n      <li class=\"select__item ${cls}\" data-type=\"item\" data-id=\"${item.id}\">${item.value}</li>\n    `;\n  });\n\n  return `\n    <div class=\"select__backdrop\" data-type=\"backdrop\"></div>\n    <div class=\"select__input\" data-type=\"input\">\n      <span data-type=\"value\">${text}</span>\n      <i class=\"material-icons\" data-type=\"arrow\">keyboard_arrow_down</i>\n    </div>\n    <div class=\"select__dropdown\">\n      <ul class=\"select__list\">\n        ${items.join('')}\n      </ul>\n    </div>\n  `;\n};\n\nexport class Select {\n  constructor(selector, options) {\n    this.$el = document.querySelector(selector);\n    this.options = options;\n    this.selectedId = options.selectedId;\n\n    this.render();\n    this.setup();\n  }\n\n  render() {\n    const { placeholder, data } = this.options;\n    this.$el.classList.add('select');\n    this.$el.innerHTML = getTemplate(data, placeholder, this.selectedId);\n  }\n\n  setup() {\n    this.clickHandler = this.clickHandler.bind(this);\n    this.$el.addEventListener('click', this.clickHandler);\n    this.$arrow = this.$el.querySelector('[data-type=\"arrow\"]');\n    this.$value = this.$el.querySelector('[data-type=\"value\"]');\n  }\n\n  clickHandler(event) {\n    const { type } = event.target.dataset;\n\n    if (type === 'input' || type === 'arrow' || type === 'value') {\n      this.toggle();\n    } else if (type === 'item') {\n      const id = event.target.dataset.id;\n      this.select(id);\n    } else if (type === 'backdrop') {\n      this.close();\n    }\n  }\n\n  get isOpen() {\n    return this.$el.classList.contains('open');\n  }\n\n  get current() {\n    return this.options.data.find(item => item.id === this.selectedId);\n  }\n\n  select(id) {\n    this.selectedId = id;\n    this.$value.textContent = this.current.value;\n\n    this.$el.querySelectorAll('[data-type=\"item\"]').forEach(el => {\n      el.classList.remove('selected');\n    });\n    this.$el.querySelector(`[data-id=\"${id}\"]`).classList.add('selected');\n\n    this.options.onSelect ? this.options.onSelect(this.current) : null;\n\n    this.close();\n  }\n\n  toggle() {\n    this.isOpen ? this.close() : this.open();\n  }\n\n  open() {\n    this.$el.classList.add('open');\n    this.$arrow.textContent = 'keyboard_arrow_up';\n  }\n\n  close() {\n    this.$el.classList.remove('open');\n    this.$arrow.textContent = 'keyboard_arrow_down';\n  }\n\n  destroy() {\n    this.$el.removeEventListener('click', this.clickHandler);\n    this.$el.innerHTML = '';\n  }\n}\n","import { error, notice } from '@pnotify/core';\nimport galleryTemplate from '../templates/gallery.hbs';\nimport { Select } from './select';\nimport * as basicLightbox from 'basiclightbox';\n\nconst refs = {\n  btnSearch: document.querySelector('.search-form__btn'),\n  btnLoadMore: document.querySelector('.load-more_btn'),\n  gallery: document.querySelector('.gallery'),\n  query: document.querySelector('.search-form__input'),\n  form: document.querySelector('.search-form'),\n};\n\nnew Select('#select', {\n  selectedId: '1',\n  data: [\n    { id: '1', value: 'en' },\n    { id: '2', value: 'ru' },\n    { id: '3', value: 'de' },\n    { id: '4', value: 'fr' },\n    { id: '5', value: 'it' },\n  ],\n  onSelect(item) {\n    ImageFinder.lenguage = item.value;\n  },\n});\n\nconst ImageFinder = {\n  key: 'key=18267918-a545f4b922b3d8b59313b99e1',\n  page: 1,\n  lenguage: 'en',\n  baseURL:\n    'https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=',\n};\n\nrefs.btnSearch.addEventListener('click', onClickSearch);\nrefs.gallery.addEventListener('click', onImageClick);\n\nconst Observer = new IntersectionObserver(loadMore, {\n  rootMargin: '0px',\n  threshold: 0.4,\n});\n\nasync function getData() {\n  const { baseURL, searchQuery, key, page, lenguage } = ImageFinder;\n  const url = `${baseURL}${searchQuery}&page=${page}&lang=${lenguage}&per_page=12&${key}`;\n\n  try {\n    const response = await fetch(url);\n    const data = await response.json();\n    const { hits, total } = data;\n    if (!total) return notice('Search failed');\n    const layout = galleryTemplate(hits);\n    refs.gallery.insertAdjacentHTML('beforeend', layout);\n    Observer.observe(refs.gallery.lastElementChild);\n  } catch (e) {\n    error(e);\n  }\n}\n\nfunction clearGallery() {\n  refs.gallery.innerHTML = '';\n}\n\nfunction onClickSearch(event) {\n  event.preventDefault();\n  clearGallery();\n  ImageFinder.page = 1;\n  ImageFinder.searchQuery = refs.query.value;\n  getData();\n}\n\nfunction onImageClick(event) {\n  if (event.target.nodeName !== 'IMG') {\n    return;\n  }\n  const src = event.target.dataset.source;\n  basicLightbox\n    .create(\n      `\n  \t<img width=\"1400\" height=\"900\" src=${src}>\n  `,\n    )\n    .show();\n}\n\nfunction loadMore(entries, observer) {\n  entries.forEach(entry => {\n    if (entry.isIntersecting) {\n      observer.unobserve(entry.target);\n      ImageFinder.page += 1;\n      getData();\n    }\n  });\n}\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"gallery-item\\\">\\n  <div class=\\\"photo-card\\\">\\n    <img src=\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":13},\"end\":{\"line\":4,\"column\":29}}}) : helper)))\n    + \" alt=\\\"\\\" data-source=\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"largeImageURL\") || (depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":49},\"end\":{\"line\":4,\"column\":66}}}) : helper)))\n    + \" width=\\\"360\\\" height=\\\"200\\\" />\\n\\n    <div class=\\\"stats\\\">\\n      <p class=\\\"stats-item\\\">\\n        <i class=\\\"material-icons\\\">thumb_up</i>\\n        \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":8},\"end\":{\"line\":9,\"column\":17}}}) : helper)))\n    + \"\\n      </p>\\n      <p class=\\\"stats-item\\\">\\n        <i class=\\\"material-icons\\\">visibility</i>\\n        \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":8},\"end\":{\"line\":13,\"column\":17}}}) : helper)))\n    + \"\\n      </p>\\n      <p class=\\\"stats-item\\\">\\n        <i class=\\\"material-icons\\\">comment</i>\\n        \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":17,\"column\":8},\"end\":{\"line\":17,\"column\":20}}}) : helper)))\n    + \"\\n      </p>\\n      <p class=\\\"stats-item\\\">\\n        <i class=\\\"material-icons\\\">cloud_download</i>\\n        \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":8},\"end\":{\"line\":21,\"column\":21}}}) : helper)))\n    + \"\\n      </p>\\n    </div>\\n  </div>\\n</li>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":26,\"column\":10}}})) != null ? stack1 : \"\");\n},\"useData\":true});"],"sourceRoot":""}